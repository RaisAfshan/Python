{% extends 'user/userHome.html' %}
{% load static %}
{% block content %}

<div class="container py-5">
  <div class="row">
    <!-- Product Image -->
    <div class="col-md-5">
      <div class="card border-0 p-3">
        {% if prodDetail.get_default_image %}
          <img src="{{ prodDetail.get_default_image.image.url }}" class="img-fluid rounded" alt="Main Image" id="mainImage">
        {% endif %}
      </div>

      <div class="d-flex flex-wrap gap-2 mt-2">
          {% for img in prodDetail.images.all %}
            <img src="{{img.image.url}}" class="img-thumbnail gallery-thumb" style="width:60px; cursor:pointer;"
                  onclick="document.getElementById('mainImage').src=this.src;" alt="thumbnail">
        {% endfor %}
      </div>
    </div>

    <!-- Product Details -->
    <div class="col-md-7">
      <h5 class="fw-bold">{{ prodDetail.product.title }}</h5>
      <h6 class="text-muted">Brand: <span class="fw-semibold">{{ prodDetail.product.brand }}</span></h6>
      <p class="mt-3">{{ prodDetail.product.description }}</p>

      <!-- Primary Variant Buttons -->
      <div class="mb-3">
        <label class="form-label fw-semibold">{{ prodDetail.product.primary_variant }}</label>
        <div class="btn-group" role="group" aria-label="Primary Options">
          {% for pv in primary_values %}
            <a href="?primary={{ pv }}"
               class="btn {% if pv == selected_primary %}btn-dark{% else %}btn-outline-dark{% endif %}">
              {{ pv }}
            </a>
          {% endfor %}
        </div>
      </div>

      <!-- Secondary Variant Buttons -->
      {% if secondary_values %}
      <div class="mb-4">
        {% if prodDetail.product.secondary_variant %}
        <label class="form-label fw-semibold">{{ prodDetail.product.secondary_variant }}</label>
        {% endif %}
        <div class="btn-group" role="group" aria-label="Secondary Options">
          {% for sv in secondary_values %}
            {% if sv %}
            <a href="?primary={{ selected_primary }}&secondary={{ sv }}"
               class="btn {% if sv == selected_secondary or not selected_secondary and forloop.first %}btn-dark{% else %}btn-outline-dark{% endif %}">
              {{ sv }}
            </a>
            {% endif %}
          {% endfor %}
        </div>
      </div>
      {% elif secondary_values == None %}
        <p>  </p>
      {% endif %}

      <!-- Price -->
      <p class="text-dark fs-5">
        <span class="fw-bold">Rs.</span> {{ prodDetail.price }}
      </p>

      <!-- Add to Cart -->
      <div class="mt-3">
        <button class="btn btn-dark btn-lg">
          <i class="bi bi-cart-plus"></i> Add to Cart
        </button>
      </div>
    </div>
  </div>
</div>

{% endblock %}
