{% extends 'user/userHome.html' %}
{% load static %}

{% block content %}
<div class="container-fluid">
    <div class="row g-0">
        <!-- Sidebar -->
        <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar" style="height: 100vh; overflow-y: auto;">
            <div class="position-sticky pt-3">
                <ul class="nav flex-column">


                    {% for cat in category %}
                        <!-- Parent Category -->
                        <li class="nav-item ms-2">
                            <div class="d-flex align-items-center">
                                <!-- Main category link -->
                                <a href="{% url 'subCategoryProduct' cat.id %}"
                                   class=" mb-0 me-1 flex-grow-0 p-0"
                                   style="text-decoration: none;">
                                    {{ cat.name }}
                                </a>

                                <!-- Arrow toggle (just an icon) -->
                                {% if cat.subcategory.all %}
                                    <span class="bi bi-caret-down-fill text-dark"data-bs-toggle="collapse"
                                          data-bs-target="#cat{{ cat.id }}"
                                          aria-expanded="false"
                                          aria-controls="cat{{ cat.id }}"
                                          style="cursor: pointer; user-select: none;">

                                    </span>
                                {% endif %}
                            </div>

                            <!-- Subcategories -->
                            {% if cat.subcategory.all %}
                                <div class="collapse ps-3 mt-1" id="cat{{ cat.id }}">
                                    <ul class="list-unstyled fw-normal pb-1 small">
                                        {% for sub in cat.subcategory.all %}
                                            <li>
                                                <a href="{% url 'subCategoryProduct' sub.id %}"
                                                   class="link-dark rounded d-block py-1 ps-2 hover-bg-light">
                                                    {{ sub.name }}
                                                </a>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            {% endif %}
                        </li>

                    {% endfor %}

                <!--price filter-->
                    <li class="mt-3 p-2">
                        <form method="get" action="">
                            <label class="form-label fw-bold">Filter by Price</label>
                            <div class="input-group mb-3">
                                <input type="number" class="form-control" name="min_price" placeholder="Min Rs" min="0">
                                <input type="number" class="form-control" name="max_price" placeholder="Max Rs" min="0">
                                <button class="btn btn-dark" type="submit">Apply</button>
                            </div>
                        </form>
                    </li>
                </ul>
            </div>

        </nav>

        <!-- Main content -->
        <main class="col-md-9 ms-sm-auto col-lg-10">
            {% block sub %}

            {% endblock %}
        </main>
    </div>
</div>
{% endblock %}
